+ umask 000

+ export GIT_LFS_SKIP_SMUDGE=1

+ retry 6 git clone --branch="main" --depth 50 https://x-token-auth:$REPOSITORY_OAUTH_ACCESS_TOKEN@bitbucket.org/$BITBUCKET_REPO_FULL_NAME.git $BUILD_DIR
Cloning into '/opt/atlassian/pipelines/agent/build'...

+ git reset --hard d61da2487014efee3674d3eedc8b4d56cd7fef34
HEAD is now at d61da24 chore: update AI readiness report

+ git config user.name bitbucket-pipelines

+ git config user.email commits-noreply@bitbucket.org

+ git config push.default current

+ git config http.${BITBUCKET_GIT_HTTP_ORIGIN}.proxy http://localhost:29418/

+ git remote set-url origin http://bitbucket.org/$BITBUCKET_REPO_FULL_NAME

+ git reflog expire --expire=all --all

+ echo ".bitbucket/pipelines/generated" >> .git/info/exclude

+ chmod 777 $BUILD_DIR


Cache "pip: ~/.cache/pip": Downloading
Cache "pip: ~/.cache/pip": Downloaded 21.5 MiB in 0 seconds
Cache "pip: ~/.cache/pip": Extracting
Cache "pip: ~/.cache/pip": Extracted in 0 seconds

Default variables:
    BITBUCKET_BRANCH
    BITBUCKET_BUILD_NUMBER
    BITBUCKET_CLONE_DIR
    BITBUCKET_COMMIT
    BITBUCKET_GIT_HTTP_ORIGIN
    BITBUCKET_GIT_SSH_ORIGIN
    BITBUCKET_PACKAGES_TOKEN
    BITBUCKET_PIPELINES_VARIABLES_PATH
    BITBUCKET_PIPELINE_UUID
    BITBUCKET_PROJECT_KEY
    BITBUCKET_PROJECT_UUID
    BITBUCKET_REPO_FULL_NAME
    BITBUCKET_REPO_IS_PRIVATE
    BITBUCKET_REPO_OWNER
    BITBUCKET_REPO_OWNER_UUID
    BITBUCKET_REPO_SLUG
    BITBUCKET_REPO_UUID
    BITBUCKET_SSH_KEY_FILE
    BITBUCKET_STEP_OIDC_TOKEN
    BITBUCKET_STEP_RUN_NUMBER
    BITBUCKET_STEP_TRIGGERER_UUID
    BITBUCKET_STEP_UUID
    BITBUCKET_TEST_METADATA_FILE_PATH
    BITBUCKET_WORKSPACE
    CI
    DOCKER_HOST

Repository variables:
    LLM_API_KEY
    LLM_BASE_URL
    LLM_MODEL

Images used:
    build : docker.io/library/python@sha256:b499cef422563a0ea06776df379781343de803291ffcfcd5513faf87a36ede6b

Runtime:
    cloud:
        version: 2
        arch: x86

+ echo "=== DEBUG: Bash Environment Investigation ==="
echo "Bash version:"
bash --version
echo "Current shell: $SHELL"
echo "PS1 value: $PS1"
echo "PROMPT_COMMAND value: $PROMPT_COMMAND"
echo "TERM value: $TERM"
echo "TTY info:"
tty || echo "No TTY available"
echo "Interactive shell flags: $-"
echo "=== END DEBUG ==="

=== DEBUG: Bash Environment Investigation ===
Bash version:
GNU bash, version 5.2.37(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2022 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Current shell: /bin/bash
PS1 value: ${debian_chroot:+($debian_chroot)}\u@\h:\w\$ 
PROMPT_COMMAND value: 
TERM value: dumb
TTY info:
not a tty
No TTY available
Interactive shell flags: ehiB
=== END DEBUG ===

+ pip install uv
Collecting uv
  Using cached uv-0.9.17-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (11 kB)
Using cached uv-0.9.17-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (22.1 MB)
Installing collected packages: uv
Successfully installed uv-0.9.17
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.

[notice] A new release of pip is available: 25.0.1 -> 25.3
[notice] To update, run: pip install --upgrade pip

+ uv pip install --system "openhands-sdk @ git+https://github.com/OpenHands/agent-sdk.git@fix/disable-bracketed-paste-mode#subdirectory=openhands-sdk"
Using Python 3.12.12 environment at: /usr/local
   Updating https://github.com/OpenHands/agent-sdk.git (fix/disable-bracketed-paste-mode)
    Updated https://github.com/OpenHands/agent-sdk.git (bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3)
Resolved 123 packages in 1.94s
   Building openhands-sdk @ git+https://github.com/OpenHands/agent-sdk.git@bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3#subdirectory=openhands-sdk
Downloading aiohttp (1.7MiB)
Downloading beartype (1.3MiB)
Downloading hf-xet (3.2MiB)
Downloading pydantic-core (2.0MiB)
Downloading litellm (10.6MiB)
Downloading openai (1.0MiB)
Downloading lupa (2.0MiB)
Downloading pygments (1.2MiB)
Downloading tokenizers (3.1MiB)
Downloading tiktoken (1.1MiB)
Downloading cryptography (4.3MiB)
Downloading grpcio (5.6MiB)
 Downloaded tiktoken
 Downloaded pydantic-core
 Downloaded lupa
 Downloaded aiohttp
 Downloaded tokenizers
 Downloaded hf-xet
 Downloaded grpcio
 Downloaded pygments
 Downloaded cryptography
 Downloaded beartype
 Downloaded openai
 Downloaded litellm
      Built openhands-sdk @ git+https://github.com/OpenHands/agent-sdk.git@bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3#subdirectory=openhands-sdk
Prepared 123 packages in 2.48s
Installed 123 packages in 103ms
 + aiohappyeyeballs==2.6.1
 + aiohttp==3.13.2
 + aiosignal==1.4.0
 + annotated-types==0.7.0
 + anyio==4.12.0
 + attrs==25.4.0
 + authlib==1.6.5
 + beartype==0.22.8
 + cachetools==6.2.2
 + certifi==2025.11.12
 + cffi==2.0.0
 + charset-normalizer==3.4.4
 + click==8.3.1
 + cloudpickle==3.1.2
 + cryptography==46.0.3
 + cyclopts==4.3.0
 + deprecation==2.1.0
 + diskcache==5.6.3
 + distro==1.9.0
 + dnspython==2.8.0
 + docstring-parser==0.17.0
 + docutils==0.22.3
 + email-validator==2.3.0
 + exceptiongroup==1.3.1
 + fakeredis==2.32.1
 + fastmcp==2.14.0
 + fastuuid==0.14.0
 + filelock==3.20.0
 + frozenlist==1.8.0
 + fsspec==2025.12.0
 + googleapis-common-protos==1.72.0
 + grpcio==1.67.1
 + h11==0.16.0
 + hf-xet==1.2.0
 + httpcore==1.0.9
 + httpx==0.28.1
 + httpx-sse==0.4.3
 + huggingface-hub==1.2.2
 + idna==3.11
 + importlib-metadata==8.7.0
 + jaraco-classes==3.4.0
 + jaraco-context==6.0.1
 + jaraco-functools==4.3.0
 + jeepney==0.9.0
 + jinja2==3.1.6
 + jiter==0.12.0
 + jsonschema==4.25.1
 + jsonschema-path==0.3.4
 + jsonschema-specifications==2025.9.1
 + keyring==25.7.0
 + litellm==1.80.9
 + lmnr==0.7.24
 + lupa==2.6
 + markdown-it-py==4.0.0
 + markupsafe==3.0.3
 + mcp==1.23.3
 + mdurl==0.1.2
 + more-itertools==10.8.0
 + multidict==6.7.0
 + openai==2.11.0
 + openapi-pydantic==0.5.1
 + openhands-sdk==1.5.2 (from git+https://github.com/OpenHands/agent-sdk.git@bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3#subdirectory=openhands-sdk)
 + opentelemetry-api==1.39.1
 + opentelemetry-exporter-otlp-proto-common==1.39.1
 + opentelemetry-exporter-otlp-proto-grpc==1.39.1
 + opentelemetry-exporter-otlp-proto-http==1.39.1
 + opentelemetry-exporter-prometheus==0.60b1
 + opentelemetry-instrumentation==0.60b1
 + opentelemetry-instrumentation-threading==0.60b1
 + opentelemetry-proto==1.39.1
 + opentelemetry-sdk==1.39.1
 + opentelemetry-semantic-conventions==0.60b1
 + opentelemetry-semantic-conventions-ai==0.4.13
 + orjson==3.11.5
 + packaging==25.0
 + pathable==0.4.4
 + pathvalidate==3.3.1
 + platformdirs==4.5.1
 + prometheus-client==0.23.1
 + propcache==0.4.1
 + protobuf==6.33.2
 + py-key-value-aio==0.3.0
 + py-key-value-shared==0.3.0
 + pycparser==2.23
 + pydantic==2.12.5
 + pydantic-core==2.41.5
 + pydantic-settings==2.12.0
 + pydocket==0.15.4
 + pygments==2.19.2
 + pyjwt==2.10.1
 + pyperclip==1.11.0
 + python-dotenv==1.2.1
 + python-frontmatter==1.1.0
 + python-json-logger==4.0.0
 + python-multipart==0.0.20
 + pyyaml==6.0.3
 + redis==7.1.0
 + referencing==0.36.2
 + regex==2025.11.3
 + requests==2.32.5
 + rich==14.2.0
 + rich-rst==1.3.2
 + rpds-py==0.30.0
 + secretstorage==3.5.0
 + shellingham==1.5.4
 + sniffio==1.3.1
 + sortedcontainers==2.4.0
 + sse-starlette==3.0.3
 + starlette==0.50.0
 + tenacity==9.1.2
 + tiktoken==0.12.0
 + tokenizers==0.22.1
 + tqdm==4.67.1
 + typer==0.20.0
 + typer-slim==0.20.0
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.6.2
 + uvicorn==0.38.0
 + websockets==15.0.1
 + wrapt==1.17.3
 + yarl==1.22.0
 + zipp==3.23.0

+ uv pip install --system "openhands-tools @ git+https://github.com/OpenHands/agent-sdk.git@fix/disable-bracketed-paste-mode#subdirectory=openhands-tools"
Using Python 3.12.12 environment at: /usr/local
   Updating https://github.com/OpenHands/agent-sdk.git (fix/disable-bracketed-paste-mode)
    Updated https://github.com/OpenHands/agent-sdk.git (bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3)
Resolved 175 packages in 980ms
   Building func-timeout==4.3.5
   Building openhands-tools @ git+https://github.com/OpenHands/agent-sdk.git@bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3#subdirectory=openhands-tools
Downloading pillow (6.7MiB)
Downloading lxml (5.0MiB)
Downloading aiohttp (1.6MiB)
Downloading reportlab (1.9MiB)
Downloading google-api-python-client (14.0MiB)
      Built func-timeout==4.3.5
 Downloaded aiohttp
 Downloaded pillow
 Downloaded reportlab
 Downloaded lxml
 Downloaded google-api-python-client
      Built openhands-tools @ git+https://github.com/OpenHands/agent-sdk.git@bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3#subdirectory=openhands-tools
Prepared 53 packages in 1.39s
Uninstalled 1 package in 1ms
Installed 53 packages in 46ms
 + aiofiles==25.1.0
 - aiohttp==3.13.2
 + aiohttp==3.12.15
 + anthropic==0.75.0
 + backoff==2.2.1
 + bashlex==0.18
 + beautifulsoup4==4.14.3
 + binaryornot==0.4.4
 + browser-use==0.11.0
 + browser-use-sdk==2.0.12
 + bubus==1.5.6
 + cdp-use==1.4.4
 + chardet==5.2.0
 + func-timeout==4.3.5
 + google-api-core==2.28.1
 + google-api-python-client==2.187.0
 + google-auth==2.41.1
 + google-auth-httplib2==0.2.1
 + google-auth-oauthlib==1.2.3
 + google-genai==1.55.0
 + groq==0.37.1
 + httplib2==0.31.0
 + inquirerpy==0.3.4
 + json-repair==0.54.2
 + libtmux==0.52.1
 + lxml==6.0.2
 + markdownify==1.2.2
 + oauthlib==3.3.1
 + ollama==0.6.1
 + openhands-tools==1.5.2 (from git+https://github.com/OpenHands/agent-sdk.git@bf0a7e44bb5dd6de6d2c604c8522ac41ae3e92d3#subdirectory=openhands-tools)
 + pfzy==0.3.4
 + pillow==12.0.0
 + portalocker==2.10.1
 + posthog==7.0.1
 + prompt-toolkit==3.0.52
 + proto-plus==1.26.1
 + psutil==7.1.3
 + pyasn1==0.6.1
 + pyasn1-modules==0.4.2
 + pyotp==2.9.0
 + pyparsing==3.2.5
 + pypdf==6.4.1
 + python-dateutil==2.9.0.post0
 + python-docx==1.2.0
 + reportlab==4.4.6
 + requests-oauthlib==2.0.0
 + rsa==4.9.1
 + screeninfo==0.8.1
 + six==1.17.0
 + soupsieve==2.8
 + tom-swe==1.0.3
 + uritemplate==4.2.0
 + uuid7==0.1.0
 + wcwidth==0.2.14

+ if [ -z "$LLM_API_KEY" ]; then
  echo "Error: LLM_API_KEY repository variable is not set."
  echo "Go to Repository Settings â†’ Repository variables to add it."
  exit 1
fi


+ python scripts/ai_readiness_report.py
{"asctime": "2025-12-11 23:50:24,096", "levelname": "INFO", "name": "__main__", "filename": "ai_readiness_report.py", "lineno": 356, "message": "Scanning repository: /opt/atlassian/pipelines/agent/build"}
{"asctime": "2025-12-11 23:50:24,097", "levelname": "INFO", "name": "__main__", "filename": "ai_readiness_report.py", "lineno": 361, "message": "Basic scan complete: 40/100 points"}
{"asctime": "2025-12-11 23:50:24,097", "levelname": "INFO", "name": "__main__", "filename": "ai_readiness_report.py", "lineno": 372, "message": "Using OpenHands agent for detailed analysis..."}
{"asctime": "2025-12-11 23:50:25,911", "levelname": "INFO", "name": "openhands.sdk.conversation.state", "filename": "state.py", "lineno": 228, "message": "Created new conversation d3833a34-2a38-4ecd-a444-3870ec93fb0c\nState: {'id': UUID('d3833a34-2a38-4ecd-a444-3870ec93fb0c'), 'workspace': {'kind': 'LocalWorkspace', 'working_dir': '/opt/atlassian/pipelines/agent/build'}, 'persistence_dir': None, 'max_iterations': 500, 'stuck_detection': True, 'execution_status': <ConversationExecutionStatus.IDLE: 'idle'>, 'confirmation_policy': {'kind': 'NeverConfirm'}, 'security_analyzer': None, 'activated_knowledge_skills': [], 'stats': {'usage_to_metrics': {}}, 'secret_registry': {'secret_sources': {}}}\nAgent: {'kind': 'Agent', 'llm': {'model': 'litellm_proxy/anthropic/claude-sonnet-4-5-20250929', 'api_key': SecretStr('**********'), 'base_url': 'https://llm-proxy.eval.all-hands.dev', 'openrouter_site_url': 'https://docs.all-hands.dev/', 'openrouter_app_name': 'OpenHands', 'num_retries': 5, 'retry_multiplier': 8.0, 'retry_min_wait': 8, 'retry_max_wait': 64, 'max_message_chars': 30000, 'temperature': 0.0, 'top_p': 1.0, 'max_input_tokens': 200000, 'max_output_tokens': 64000, 'stream': False, 'drop_params': True, 'modify_params': True, 'disable_stop_word': False, 'caching_prompt': True, 'log_completions': False, 'log_completions_folder': 'logs/completions', 'native_tool_calling': True, 'reasoning_effort': 'high', 'enable_encrypted_reasoning': True, 'prompt_cache_retention': '24h', 'extended_thinking_budget': 200000, 'usage_id': 'ai_readiness_report', 'litellm_extra_body': {}, 'OVERRIDE_ON_SERIALIZE': ('api_key', 'aws_access_key_id', 'aws_secret_access_key', 'litellm_extra_body')}, 'tools': [{'name': 'terminal', 'params': {}}, {'name': 'file_editor', 'params': {}}, {'name': 'task_tracker', 'params': {}}], 'mcp_config': {}, 'system_prompt_filename': 'system_prompt.j2', 'system_prompt_kwargs': {'cli_mode': True, 'llm_security_analyzer': True}, 'condenser': {'kind': 'LLMSummarizingCondenser', 'llm': {'model': 'litellm_proxy/anthropic/claude-sonnet-4-5-20250929', 'api_key': SecretStr('**********'), 'base_url': 'https://llm-proxy.eval.all-hands.dev', 'openrouter_site_url': 'https://docs.all-hands.dev/', 'openrouter_app_name': 'OpenHands', 'num_retries': 5, 'retry_multiplier': 8.0, 'retry_min_wait': 8, 'retry_max_wait': 64, 'max_message_chars': 30000, 'temperature': 0.0, 'top_p': 1.0, 'max_input_tokens': 200000, 'max_output_tokens': 64000, 'stream': False, 'drop_params': True, 'modify_params': True, 'disable_stop_word': False, 'caching_prompt': True, 'log_completions': False, 'log_completions_folder': 'logs/completions', 'native_tool_calling': True, 'reasoning_effort': 'high', 'enable_encrypted_reasoning': True, 'prompt_cache_retention': '24h', 'extended_thinking_budget': 200000, 'usage_id': 'condenser', 'litellm_extra_body': {}, 'OVERRIDE_ON_SERIALIZE': ('api_key', 'aws_access_key_id', 'aws_secret_access_key', 'litellm_extra_body')}, 'max_size': 80, 'keep_first': 4}}"}
{"asctime": "2025-12-11 23:50:25,913", "levelname": "INFO", "name": "openhands.tools.terminal.terminal.factory", "filename": "factory.py", "lineno": 120, "message": "Auto-detected: Using SubprocessTerminal (tmux not available)"}
{"asctime": "2025-12-11 23:50:25,913", "levelname": "INFO", "name": "openhands.tools.terminal.terminal.subprocess_terminal", "filename": "subprocess_terminal.py", "lineno": 123, "message": "Using shell: /usr/bin/bash"}
{"asctime": "2025-12-11 23:50:25,914", "levelname": "INFO", "name": "openhands.tools.file_editor.editor", "filename": "editor.py", "lineno": 95, "message": "FileEditor initialized with cwd: /opt/atlassian/pipelines/agent/build"}
{"asctime": "2025-12-11 23:50:25,918", "levelname": "INFO", "name": "openhands.tools.task_tracker.definition", "filename": "definition.py", "lineno": 161, "message": "TaskTrackerExecutor initialized with save_dir: None"}
[?2004hroot@09898fd9-9fbc-4ee2-833d-fc4627a483a7-449mc:/opt/atlassian/pipelines/agent/build# set +H; bind 'set enable-bracketed-paste off' 2>/dev/null || true; export PROMPT_COMMAND='export PS1="
[?2004l
[?2004h###PS1JSON###
[?2004l
[?2004h{
[?2004l
[?2004h  \"pid\": \"$!\",
[?2004l
[?2004h  \"exit_code\": \"$?\",
[?2004l
[?2004h  \"username\": \"\\u\",
[?2004l
[?2004h  \"hostname\": \"\\h\",
[?2004l
[?2004h  \"working_dir\": \"$(pwd)\",
[?2004l
[?2004h  \"py_interpreter_path\": \"$(command -v python || echo \\"\\")\"
[?2004l
[?2004h}
[?2004l
[?2004h###PS1END###
[?2004l
[?2004h"'; export PS2=""; printf "__OH_READY_ab0f4dc1054641e5b14a9ca4e8551977__"
[?2004l
###PS1JSON###
{
  "pid": "",
  "exit_code": "0",
  "username": "root",
  "hostname": "09898fd9-9fbc-4ee2-833d-fc4627a483a7-449mc",
  "working_dir": "/opt/atlassian/pipelines/agent/build",
  "py_interpreter_path": "/usr/local/bin/python"
}
###PS1END###
{"asctime": "2025-12-11 23:50:31,485", "levelname": "ERROR", "name": "openhands.tools.terminal.terminal.subprocess_terminal", "filename": "subprocess_terminal.py", "lineno": 349, "message": "_wait_for_prompt timed out. Looking for pattern: '\\\\\\n\\\\#\\\\#\\\\#PS1END\\\\#\\\\#\\\\#\\\\s*$', PS1_END marker: '\\n###PS1END###'"}
{"asctime": "2025-12-11 23:50:31,486", "levelname": "ERROR", "name": "openhands.tools.terminal.terminal.subprocess_terminal", "filename": "subprocess_terminal.py", "lineno": 354, "message": "Raw tail (last 500 chars): 'set +H; bind \\'set enable-bracketed-paste off\\' 2>/dev/null || true; export PROMPT_COMMAND=\\'export PS1=\"\\r\\n###PS1JSON###\\r\\n{\\r\\n  \\\\\"pid\\\\\": \\\\\"$!\\\\\",\\r\\n  \\\\\"exit_code\\\\\": \\\\\"$?\\\\\",\\r\\n  \\\\\"username\\\\\": \\\\\"\\\\\\\\u\\\\\",\\r\\n  \\\\\"hostname\\\\\": \\\\\"\\\\\\\\h\\\\\",\\r\\n  \\\\\"working_dir\\\\\": \\\\\"$(pwd)\\\\\",\\r\\n  \\\\\"py_interpreter_path\\\\\": \\\\\"$(command -v python || echo \\\\\\\\\"\\\\\\\\\")\\\\\"\\r\\n}\\r\\n###PS1END###\\r\\n\"\\'; export PS2=\"\"; printf \"__OH_READY_ab0f4dc1054641e5b14a9ca4e8551977__\"\\r\\n'"}
{"asctime": "2025-12-11 23:50:31,486", "levelname": "ERROR", "name": "openhands.tools.terminal.terminal.subprocess_terminal", "filename": "subprocess_terminal.py", "lineno": 355, "message": "Clean tail (last 500 chars): 'set +H; bind \\'set enable-bracketed-paste off\\' 2>/dev/null || true; export PROMPT_COMMAND=\\'export PS1=\"\\r\\n###PS1JSON###\\r\\n{\\r\\n  \\\\\"pid\\\\\": \\\\\"$!\\\\\",\\r\\n  \\\\\"exit_code\\\\\": \\\\\"$?\\\\\",\\r\\n  \\\\\"username\\\\\": \\\\\"\\\\\\\\u\\\\\",\\r\\n  \\\\\"hostname\\\\\": \\\\\"\\\\\\\\h\\\\\",\\r\\n  \\\\\"working_dir\\\\\": \\\\\"$(pwd)\\\\\",\\r\\n  \\\\\"py_interpreter_path\\\\\": \\\\\"$(command -v python || echo \\\\\\\\\"\\\\\\\\\")\\\\\"\\r\\n}\\r\\n###PS1END###\\r\\n\"\\'; export PS2=\"\"; printf \"__OH_READY_ab0f4dc1054641e5b14a9ca4e8551977__\"\\r\\n'"}
{"asctime": "2025-12-11 23:50:31,486", "levelname": "ERROR", "name": "openhands.tools.terminal.terminal.subprocess_terminal", "filename": "subprocess_terminal.py", "lineno": 356, "message": "PS1_END in clean_tail: True"}
{"asctime": "2025-12-11 23:50:31,487", "levelname": "ERROR", "name": "__main__", "filename": "ai_readiness_report.py", "lineno": 380, "message": "Agent failed, falling back to basic report: Prompt not visible after init"}
{"asctime": "2025-12-11 23:50:31,492", "levelname": "ERROR", "name": "__main__", "filename": "ai_readiness_report.py", "lineno": 381, "message": "Full traceback:\nTraceback (most recent call last):\n  File \"/opt/atlassian/pipelines/agent/build/scripts/ai_readiness_report.py\", line 374, in main\n    generate_report_with_agent(repo_root, scan_results, earned, possible)\n  File \"/opt/atlassian/pipelines/agent/build/scripts/ai_readiness_report.py\", line 206, in generate_report_with_agent\n    conversation = Conversation(agent=agent, workspace=str(repo_root))\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py\", line 122, in __new__\n    return LocalConversation(\n           ^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/conversation/impl/local_conversation.py\", line 165, in __init__\n    self.agent.init_state(self._state, on_event=self._on_event)\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/agent/agent.py\", line 100, in init_state\n    super().init_state(state, on_event=on_event)\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/agent/base.py\", line 190, in init_state\n    self._initialize(state)\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/agent/base.py\", line 217, in _initialize\n    result = future.result()\n             ^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/concurrent/futures/_base.py\", line 456, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/concurrent/futures/_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"/usr/local/lib/python3.12/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/tool/registry.py\", line 156, in resolve_tool\n    return resolver(tool_spec.params, conv_state)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/tool/registry.py\", line 103, in _resolve\n    created = create(conv_state=conv_state, **params)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/tools/terminal/definition.py\", line 272, in create\n    executor = TerminalExecutor(\n               ^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/tools/terminal/impl.py\", line 57, in __init__\n    self.session.initialize()\n  File \"/usr/local/lib/python3.12/site-packages/openhands/tools/terminal/terminal/terminal_session.py\", line 83, in initialize\n    self.terminal.initialize()\n  File \"/usr/local/lib/python3.12/site-packages/openhands/tools/terminal/terminal/subprocess_terminal.py\", line 197, in initialize\n    raise RuntimeError(\"Prompt not visible after init\")\nRuntimeError: Prompt not visible after init\n"}
{"asctime": "2025-12-11 23:50:31,492", "levelname": "INFO", "name": "__main__", "filename": "ai_readiness_report.py", "lineno": 349, "message": "Basic report saved to: /opt/atlassian/pipelines/agent/build/reports/ai-readiness-2025-12-11.md"}
__OH_READY_ab0f4dc1054641e5b14a9ca4e8551977__
==================================================
AI READINESS SCORE: 40%
==================================================

/usr/local/lib/python3.12/site-packages/litellm/llms/custom_httpx/async_client_cleanup.py:66: DeprecationWarning: There is no current event loop
  loop = asyncio.get_event_loop()
{"asctime": "2025-12-11 23:50:31,678", "levelname": "WARNING", "name": "openhands.sdk.conversation.impl.local_conversation", "filename": "local_conversation.py", "lineno": 598, "message": "Error during conversation cleanup: Agent not initialized; call initialize() before use", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/conversation/impl/local_conversation.py\", line 596, in __del__\n    self.close()\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/conversation/impl/local_conversation.py\", line 448, in close\n    for tool in self.agent.tools_map.values():\n                ^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/openhands/sdk/agent/base.py\", line 429, in tools_map\n    raise RuntimeError(\"Agent not initialized; call initialize() before use\")\nRuntimeError: Agent not initialized; call initialize() before use"}
exit
exit

+ git config user.name "OpenHands"

+ git config user.email "openhands@all-hands.dev"

+ if [ -n "$(git status --porcelain)" ]; then
  git add reports/
  git commit -m "chore: update AI readiness report"
  git push origin HEAD
else
  echo "No changes to commit"
fi

[main 820188c] chore: update AI readiness report
 1 file changed, 1 insertion(+), 1 deletion(-)
To http://bitbucket.org/all-hands-ai/tic-tac-toe
   d61da24..820188c  HEAD -> main

You already have a 'pip' cache so we won't create it again
Cache "pip: ~/.cache/pip": Skipping upload for existing cache

Searching for files matching artifact pattern reports/**
Artifact patterns matched 1 files with a total size of 721 B in 0 seconds
Compressed files matching artifact pattern to 584 B in 0 seconds
Uploading artifact of 584 B
Successfully uploaded artifact in 0 seconds

Searching for files matching artifact pattern *.log
Artifact pattern matched 0 files in 0 seconds.

Searching for test report files in directories named [test-reports, surefire-reports, failsafe-reports, test-results, TestResults] down to a depth of 4
Finished scanning for test reports. Found 0 test report files in 0 seconds.
Merged test suites, total number tests is 0, with 0 failures and 0 errors in 0 seconds.

Compressed step metrics file to 442 B in 0 seconds
Uploading step metrics of 442 B.
Successfully uploaded step metrics in 0 seconds.

